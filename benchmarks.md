# Performance Analysis and Benchmarking Tests

This file only documents my process of benchmark testing. I have performed a benchmark test to compare the performance of the custom scratch implementation of the `RandomForestRegressor` with the one provided by `scikit-learn`. The goal is to ensure that the custom implementation is at least as good as the one from `scikit-learn`, if not better.

## Environment Setup

Before I proceed, I need to install scikit-learn library to perform the benchmark comparison tests. As I'm using uv, I added scikit-learn through uv by running the command:

```bash
uv add scikit-learn --group benchmark-test # I will surely not add as a standard dependency!
```

I also changed the `construct_location_from_area` function in [app/handler/data/preprocess.py](./app/handler/data/preprocess.py) to get fair amount of data for running benchmark, although some locations **were skipped** because of not having enough data. The modified function:

```python
def construct_location_from_area(addr: str) -> str:
    parts = [part.strip() for part in addr.split(",")]
    if len(parts) < 2:
        return addr.title()

    return f"{parts[-2]}, {parts[-1]}".title()
```

Then I need to write the _python script_ to perform the comparison test. Although not a part of the repo, I will provide the [snippet](#code-snippet) for reference.

I ran that [python script](#code-snippet) and stored the results in a markdown file.

## Benchmark Test Results

ðŸ–ˆ Adabor, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.54638|0.54638|23579784.62581|23579784.59745|2649.31827|2649.31827|
|2|0.73136|0.73136|5905067.706|5905067.71483|1793.54325|1793.54325|
|3|0.89431|0.89431|3252449.25548|3252449.31281|1388.95025|1388.95024|
|4|0.44251|0.44251|7105196.01991|7105196.0271|2091.93698|2091.93698|
|5|0.63353|0.63353|5263803.16616|5263803.17464|1515.86056|1515.86054|

---

ðŸ–ˆ Aftab Nagar, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.38192|0.38192|4919409.65062|4919409.38041|1883.95004|1883.94997|
|2|0.27467|0.27467|37036338.21207|37036338.53604|4527.17486|4527.1749|
|3|0.10303|0.10303|40345172.86838|40345172.75938|4225.41462|4225.41466|
|4|-0.18799|-0.18799|28002519.15171|28002519.52279|4708.42431|4708.42434|
|5|0.31315|0.31315|16249668.22509|16249668.21276|3056.65712|3056.65712|

---

ðŸ–ˆ Agargaon, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|-0.00604|-0.00604|14112130.86825|14112131.00545|2947.23414|2947.23416|
|2|-0.12304|-0.12304|17249120.3139|17249120.36651|3458.47154|3458.47154|
|3|0.92154|0.92154|3767015.17079|3767015.15176|1504.6573|1504.65729|
|4|0.86944|0.86944|4126840.68972|4126840.72824|1730.49786|1730.49787|
|5|0.86611|0.86611|6053874.88157|6053874.89465|2026.78537|2026.78537|

---

ðŸ–ˆ Badda, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.79068|0.79068|21742550.31657|21742550.31642|3035.89821|3035.89826|
|2|0.72039|0.72039|14859387.68636|14859387.69126|2913.1434|2913.1434|
|3|0.57029|0.57029|22456818.9202|22456818.92923|4025.97246|4025.97246|
|4|0.89215|0.89215|5534911.73781|5534911.73492|1984.56013|1984.56013|
|5|0.5097|0.5097|40892872.47806|40892872.41958|4427.31434|4427.31432|

---

ðŸ–ˆ Banani Dohs, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|-11.24927|-11.24927|1088823715.54604|1088823721.67477|31132.07687|31132.077|
|2|0.88232|0.88232|573383886.92671|573383889.84853|18225.70129|18225.70133|
|3|-0.09708|-0.09709|847193407.98004|847193430.4706|25028.01001|25028.01026|
|4|0.3934|0.3934|525720915.43925|525720918.38311|17922.48157|17922.48165|
|5|0.6581|0.6581|509052528.77925|509052535.47889|20363.38464|20363.38481|

---

ðŸ–ˆ Banani, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.56986|0.56986|3783243023.88897|3783243023.43775|38040.20242|38040.20248|
|2|-0.22454|-0.22454|1033616667.01644|1033616675.97176|27923.05984|27923.05996|
|3|0.53677|0.53677|5457222986.10019|5457222955.81304|45791.32978|45791.32961|
|4|-0.6452|-0.6452|2761786210.07521|2761786183.41416|43470.13092|43470.13075|
|5|-1.98337|-1.98337|4461822509.7291|4461822516.87999|42500.62869|42500.62872|

---

ðŸ–ˆ Banasree, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.63859|0.63859|8567912.91128|8567913.02904|1886.93133|1886.93135|
|2|0.44522|0.44522|36738861.7566|36738861.69549|3571.94761|3571.94761|
|3|0.65693|0.65693|12857526.63432|12857526.54829|2780.68601|2780.68599|
|4|0.76372|0.76372|9165197.72659|9165197.8497|2653.69027|2653.6903|
|5|0.72524|0.72524|74230419.84094|74230418.73743|4526.26612|4526.26609|

---

ðŸ–ˆ Bangshal, Dhaka
â›Œ Skipping Bangshal, Dhaka (not enough data points: 3)

ðŸ–ˆ Baridhara Dohs, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.48052|0.48052|333568762.12753|333568769.50524|17004.08896|17004.08917|
|2|0.65078|0.65078|226278226.26772|226278226.26247|13000.96425|13000.96425|
|3|0.23649|0.23649|407466351.7722|407466352.4248|17798.27286|17798.27287|
|4|0.16239|0.16239|681196826.74825|681196825.48283|18174.70695|18174.70694|
|5|-0.12569|-0.12569|683455628.98818|683455634.67062|19205.55767|19205.55788|

---

ðŸ–ˆ Baridhara, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.77406|0.77406|6363129547.10016|6363129549.10931|52075.46016|52075.46012|
|2|0.50016|0.50016|5392157628.13271|5392157607.33538|47418.55649|47418.55632|
|3|0.81412|0.81412|4341712728.69205|4341712731.6025|37811.69192|37811.69202|
|4|0.93871|0.93871|4412921536.00067|4412921536.49592|41105.74248|41105.74249|
|5|0.82372|0.82372|20634944454.24728|20634944459.86212|75271.12069|75271.12071|

---

ðŸ–ˆ Bashabo, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|-0.55052|-0.364|24894470.7643|21899801.53339|4893.54111|4577.13592|
|2|-1.9503|-1.9503|72282252.2226|72282338.15199|8176.11011|8176.11424|
|3|0.40065|0.40065|4794778.10207|4794777.88599|2178.67886|2178.67868|
|4|-46.57393|-46.57393|42287940.49782|42287940.46553|5531.46275|5531.46286|
|5|0.05144|0.05144|7008777.01762|7008773.76916|2435.85038|2435.84994|

---

ðŸ–ˆ Bashundhara R-A, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.80128|0.80128|387586390.58507|387586390.44879|9986.42174|9986.42174|
|2|0.86444|0.86444|976221906.4209|976221906.28106|14154.72789|14154.72789|
|3|0.75072|0.75072|843307703.79992|843307703.76145|9704.07048|9704.07048|
|4|0.50476|0.50476|83815759.01417|83815758.92046|7537.87782|7537.87781|
|5|0.22693|0.22693|138343021.20273|138343021.16961|8924.33591|8924.33591|

---

ðŸ–ˆ Cantonment, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.66766|0.66766|9049805.03158|9049805.03545|2233.24038|2233.24038|
|2|0.25095|0.25095|16759056.48033|16759056.56809|3635.60737|3635.60738|
|3|0.07909|0.07909|27050435.71311|27050435.85943|4536.16433|4536.16434|
|4|0.28024|0.28024|8813376.46316|8813376.37954|2313.64622|2313.6462|
|5|-0.08339|-0.08339|12254493.23456|12254493.23042|2878.17973|2878.17973|

---

ðŸ–ˆ Dakshin Khan, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.55169|0.55169|7064763.88111|7064763.93301|1855.55409|1855.5541|
|2|0.77537|0.77537|2170559.94836|2170559.95736|1222.01511|1222.01511|
|3|0.11979|0.11979|3019541.0159|3019541.05221|1205.72366|1205.72368|
|4|0.62487|0.62487|2770284.88475|2770284.90484|1279.02624|1279.02625|
|5|0.49325|0.49325|6030945.09468|6030945.14676|1767.9856|1767.9856|

---

ðŸ–ˆ Demra, Dhaka
â›Œ Skipping Demra, Dhaka (not enough data points: 2)

ðŸ–ˆ Dhanmondi, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.49478|0.49478|238730154.93293|238730153.94481|14209.4315|14209.43146|
|2|-0.25771|-0.25771|714992912.44629|714992922.42493|20160.91662|20160.91679|
|3|-0.50766|-0.50766|342013212.59307|342013213.14637|15275.95956|15275.95957|
|4|0.02975|0.02975|39509395315.46074|39509395311.7533|59387.68394|59387.68393|
|5|0.14412|0.14412|436778494.33977|436778500.17371|16656.76163|16656.76174|

---

ðŸ–ˆ Eskaton, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.34653|0.36494|39312565.77073|38205225.44162|5685.96232|5587.739|
|2|0.35206|0.33232|40327670.13742|41556682.37314|5784.6716|5784.11464|
|3|0.39792|0.36607|32512463.64012|34232266.08944|4230.33|4781.94745|
|4|0.71117|0.80378|24307980.95713|16514183.95083|4338.41247|3951.30473|
|5|0.43239|0.44632|43274600.57339|42212440.26098|5833.77258|5751.04264|

---

ðŸ–ˆ Gulshan, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.40731|0.40731|3380879708.53835|3380879699.05523|45318.24296|45318.24284|
|2|0.71887|0.71887|3412189570.09064|3412189560.79256|43376.8434|43376.84328|
|3|0.32806|0.32806|5878588432.40562|5878588434.35273|54220.46065|54220.46068|
|4|0.52072|0.52072|4199485831.65933|4199485823.13735|43018.73956|43018.73952|
|5|0.49632|0.49632|15198737063.16808|15198737055.45188|61789.89847|61789.89858|

---

ðŸ–ˆ Hatirpool, Dhaka
â›Œ Skipping Hatirpool, Dhaka (not enough data points: 7)

ðŸ–ˆ Hazaribag, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.53676|0.53676|13359543.14256|13359543.26105|2136.37198|2136.37198|
|2|0.0|0.0|45407.7175|45407.70306|213.09087|213.09083|
|3|-4.87551|-4.87552|2321191.00867|2321191.71913|566.82264|566.82264|
|4|-2.2393|-2.2393|93899768.23015|93899767.60107|5945.35787|5945.35785|
|5|0.45225|0.45225|22674030.49795|22674030.08948|2904.05422|2904.05418|

---

ðŸ–ˆ Ibrahimpur, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.19458|0.19458|4295592.43704|4295592.45406|1774.13276|1774.13276|
|2|0.32944|0.32944|1662430.49265|1662430.4789|1089.59165|1089.59164|
|3|0.11892|0.11892|2471927.90787|2471927.87469|1410.0738|1410.07379|
|4|0.60735|0.60735|3588396.71654|3588396.7272|1326.20247|1326.20247|
|5|0.65871|0.65871|9034785.65175|9034786.24128|2691.46535|2691.46542|

---

ðŸ–ˆ Jatra Bari, Dhaka
â›Œ Skipping Jatra Bari, Dhaka (not enough data points: 1)

ðŸ–ˆ Joar Sahara, Dhaka
â›Œ Skipping Joar Sahara, Dhaka (not enough data points: 9)

ðŸ–ˆ Kachukhet, Dhaka
â›Œ Skipping Kachukhet, Dhaka (not enough data points: 1)

ðŸ–ˆ Kafrul, Dhaka
â›Œ Skipping Kafrul, Dhaka (not enough data points: 4)

ðŸ–ˆ Kalabagan, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|-0.7534|-0.7534|65849861.22651|65849867.86475|6408.63164|6408.6317|
|2|-1.1025|-1.1025|245291524.99547|245291543.94432|12944.61412|12944.61432|
|3|-54.59557|-54.59557|345927987.88765|345927996.30485|15440.07383|15440.07382|
|4|-3.19861|-3.19861|90503379.57955|90503384.26291|8016.74272|8016.74289|
|5|-9.00525|-9.00525|8893557.06614|8893556.91015|2482.35596|2482.35593|

---

ðŸ–ˆ Kalachandpur, Dhaka
â›Œ Skipping Kalachandpur, Dhaka (not enough data points: 7)

ðŸ–ˆ Kathalbagan, Dhaka
â›Œ Skipping Kathalbagan, Dhaka (not enough data points: 5)

ðŸ–ˆ Khilgaon, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.67041|0.65425|15329848.26744|16081649.29482|2847.78297|3148.05441|
|2|0.66229|0.66229|7357117.34818|7357117.10816|2123.97634|2123.97629|
|3|-0.77227|-0.77227|16257998.15785|16257998.18117|3663.78165|3663.78166|
|4|0.81385|0.81385|15886039.28594|15886039.27771|2533.18608|2533.18608|
|5|0.46232|0.46232|13624142.87216|13624142.89134|2782.70912|2782.70913|

---

ðŸ–ˆ Khilkhet, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.80185|0.80185|9560242.98582|9560242.91884|1958.18831|1958.18831|
|2|0.13521|0.13521|6543125.04096|6543125.00487|2087.96519|2087.96518|
|3|0.49376|0.49376|584841853.13077|584841852.73199|7958.4095|7958.40951|
|4|-0.18329|-0.18329|4268657.8849|4268657.86381|1576.97409|1576.97408|
|5|0.65747|0.65747|2370841.12852|2370841.13995|1253.94341|1253.94341|

---

ðŸ–ˆ Kuril, Dhaka
â›Œ Skipping Kuril, Dhaka (not enough data points: 3)

ðŸ–ˆ Lalbagh, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.75096|0.75096|7019821.77577|7019820.68105|2428.84917|2428.84894|
|2|0.64838|0.64838|11317798.64324|11317797.60633|2864.66012|2864.66005|
|3|0.94228|0.94228|12064103.74174|12064102.77649|2507.47317|2507.47335|
|4|0.94068|0.94068|1523887.03885|1523887.44154|1043.9022|1043.90237|
|5|0.96802|0.96802|1535189.62393|1535190.04419|1169.81431|1169.81448|

---

ðŸ–ˆ Lalmatia, Dhaka
â›Œ Skipping Lalmatia, Dhaka (not enough data points: 9)

ðŸ–ˆ Maghbazar, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.80317|0.80317|14099597.40517|14099597.4217|2231.84057|2231.84057|
|2|0.31992|0.31992|30256435.57718|30256435.37783|4974.97471|4974.97468|
|3|-0.11165|-0.11165|33258799.21342|33258799.68426|4611.98312|4611.98316|
|4|0.89213|0.89213|12473651.42289|12473651.47328|2652.99435|2652.99436|
|5|0.34255|0.34255|24553614.7651|24553615.66997|3006.88684|3006.88688|

---

ðŸ–ˆ Malibagh, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.87383|0.87383|3816724.73495|3816724.96451|1857.44514|1857.44521|
|2|0.80701|0.80701|3087854.02873|3087854.29609|1440.59246|1440.59255|
|3|0.89185|0.89185|675947.63269|675947.59861|821.5107|821.51068|
|4|0.96683|0.96683|1194210.93438|1194211.14784|1049.5334|1049.53352|
|5|0.97103|0.97103|28971.94306|28971.90491|161.26301|161.2629|

---

ðŸ–ˆ Mirpur, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.59239|0.59239|34462005.59936|34462005.50448|3077.89981|3077.89981|
|2|0.79184|0.79184|9953532.79196|9953532.78685|2457.13283|2457.13283|
|3|0.67198|0.67198|19010729.26454|19010729.25956|2573.86858|2573.86858|
|4|0.70905|0.70905|16160982.64153|16160982.64545|2790.90257|2790.90257|
|5|0.72033|0.72033|17097542.39924|17097542.42034|2528.71676|2528.71677|

---

ðŸ–ˆ Mohakhali Dohs, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|-0.51702|-0.49657|2133309706.15588|2104558325.70405|33164.33544|32727.99665|
|2|-3.83192|-3.49922|271795569.37505|253081383.49508|15355.70553|14733.75398|
|3|0.48266|0.52565|391235546.28519|358729218.31778|16710.14202|15707.4033|
|4|-7.22071|-7.5459|205517705.67451|213647499.38436|14052.44392|14052.44392|
|5|-4.39936|-4.41287|2159745339.46287|2165148974.55159|36846.85741|36846.85741|

---

ðŸ–ˆ Mohakhali, Dhaka
â›Œ Skipping Mohakhali, Dhaka (not enough data points: 4)

ðŸ–ˆ Mohammadpur, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.38388|0.38388|63332452.66787|63332452.68352|5631.53488|5631.53488|
|2|0.64628|0.64628|59466950.39406|59466950.41511|4595.44224|4595.44224|
|3|0.52193|0.52193|81351450.63662|81351450.64262|5275.49099|5275.491|
|4|0.32963|0.32963|17462577.3033|17462577.33247|2808.03488|2808.03489|
|5|0.1032|0.1032|28337466.18044|28337466.20434|3713.39325|3713.39325|

---

ðŸ–ˆ Motijheel, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.75624|0.75624|34919148.55863|34919148.14218|5402.14514|5402.14515|
|2|0.51769|0.51769|14318566.18254|14318566.33414|3651.04939|3651.0494|
|3|0.3346|0.3346|16468534.5676|16468534.6617|3551.1728|3551.17282|
|4|0.86543|0.86543|8502872.32162|8502872.44911|2472.86662|2472.86663|
|5|0.77448|0.77448|2988099.42547|2988099.44367|1023.09169|1023.09171|

---

ðŸ–ˆ New Market, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.78155|0.78155|23349708.29492|23349708.01764|3433.80633|3433.80633|
|2|0.95297|0.95297|1504847.03156|1504845.83477|758.70115|758.7007|
|3|-2.6289|-2.6289|15322018.73298|15322021.33969|2908.16198|2908.16229|
|4|-0.33056|-0.33056|37551478.20835|37551476.17048|4707.32076|4707.32062|
|5|0.64272|0.64272|19372289.67257|19372289.03479|3582.62183|3582.62207|

---

ðŸ–ˆ Niketan, Dhaka
â›Œ Skipping Niketan, Dhaka (not enough data points: 8)

ðŸ–ˆ Nikunja, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.99689|0.99689|66141876.97262|66141877.0403|5471.35458|5471.35459|
|2|0.99097|0.99097|114459079.99403|114459080.5032|5679.29251|5679.29251|
|3|0.49785|0.49785|923961.70889|923961.74863|866.09087|866.09089|
|4|-80.53181|-55.85953|997949403.66293|695960683.00935|19234.12408|13102.93159|
|5|0.60417|0.60417|16213376.67444|16213376.8819|2557.01632|2557.01635|

---

ðŸ–ˆ North Shahjahanpur, Dhaka
â›Œ Skipping North Shahjahanpur, Dhaka (not enough data points: 4)

ðŸ–ˆ Paribagh, Dhaka
â›Œ Skipping Paribagh, Dhaka (not enough data points: 2)

ðŸ–ˆ Pink City, Dhaka
â›Œ Skipping Pink City, Dhaka (not enough data points: 1)

ðŸ–ˆ Rampura, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.54784|0.54784|46563668.62829|46563668.00305|3869.68587|3869.68583|
|2|0.80751|0.80751|15862528.14228|15862528.49822|3617.86424|3617.86429|
|3|0.59969|0.59969|3986761.52549|3986761.49842|1665.19629|1665.19626|
|4|0.41809|0.41809|26078961.04661|26078962.06329|2821.35004|2821.35008|
|5|0.05043|0.05043|22518403.66237|22518403.66083|3905.87884|3905.87882|

---

ðŸ–ˆ Shahbagh, Dhaka
â›Œ Skipping Shahbagh, Dhaka (not enough data points: 3)

ðŸ–ˆ Shahjahanpur, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.0|0.0|7811819.75162|7811817.61816|2794.96328|2794.9629|
|2|-10.35221|-10.35222|25542481.78927|25542485.83926|3573.68741|3573.68758|
|3|-11.95125|-11.95124|51804982.2063|51804979.20192|7171.34597|7171.34574|
|4|-1.25971|-1.25971|14123166.94624|14123183.1359|3286.70887|3286.71141|
|5|-4.65281|-7.21403|1413202.80126|2053507.9772|895.51641|1013.2887|

---

ðŸ–ˆ Shantinagar, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|-0.30036|-0.30036|65017907.57064|65017913.64542|6745.99959|6745.99997|
|2|-30.41429|-30.4143|62828589.84245|62828590.60661|5781.84615|5781.84635|
|3|0.56816|0.56816|5853896.06123|5853897.90035|2205.21549|2205.21582|
|4|-0.41827|-0.41827|31517035.76214|31517040.71835|4877.2695|4877.27001|
|5|-2.82883|-2.82883|148899117.60041|148899116.98639|8744.88792|8744.88786|

---

ðŸ–ˆ Shegunbagicha, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.54424|0.54424|7596045.06917|7596044.75004|2303.60536|2303.60534|
|2|0.0|0.0|6373441.83169|6373442.69966|2326.35306|2326.35315|
|3|0.36886|0.36886|5189383.54681|5189384.79659|2134.28686|2134.28715|
|4|0.87621|0.87621|2750861.80311|2750861.87094|1523.96085|1523.96087|
|5|0.74835|0.74835|2180991.84075|2180991.66843|1416.81315|1416.81309|

---

ðŸ–ˆ Shiddheswari, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.43383|0.43383|286625976.98134|286625977.2521|16790.08076|16790.08077|
|2|0.9968|0.9968|80014.27739|80014.25653|275.79372|275.79372|
|3|0.54511|0.54511|11372219.24984|11372221.08063|3015.5874|3015.58773|
|4|0.15649|0.15649|47447302.16378|47447302.72116|6643.7789|6643.7789|
|5|0.27781|0.27781|46220315.74186|46220324.25333|5817.46533|5817.46591|

---

ðŸ–ˆ Shyamoli, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.89027|0.89027|2987098.18568|2987098.3631|1311.16921|1311.16927|
|2|0.97772|0.97772|884994.68362|884994.64333|771.7928|771.79275|
|3|0.78645|0.78645|18459862.19221|18459862.56885|2288.81841|2288.81839|
|4|0.89875|0.89875|2925103.81443|2925103.85672|1278.79311|1278.79316|
|5|0.72069|0.72069|6331102.03226|6331102.06009|1877.76161|1877.76161|

---

ðŸ–ˆ Sutrapur, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|-6.83762|-6.83762|15675234.74018|15675234.76631|2479.19332|2479.19332|
|2|0.64418|0.64418|8776932.35882|8776932.42474|2098.72623|2098.72626|
|3|-2.21292|-2.21292|34271161.86675|34271161.86749|5128.90436|5128.90437|
|4|0.62043|0.62043|27413339.45992|27413339.40298|4488.90003|4488.90002|
|5|0.84457|0.84457|11190654.40081|11190654.02196|2575.10748|2575.10745|

---

ðŸ–ˆ Taltola, Dhaka
â›Œ Skipping Taltola, Dhaka (not enough data points: 6)

ðŸ–ˆ Tejgaon, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.44955|0.44955|4535737.43147|4535737.3346|1767.1496|1767.14957|
|2|0.7953|0.7953|5371280.47713|5371280.50329|1939.58062|1939.58062|
|3|0.67645|0.67645|17549317.90027|17549318.84859|3615.53517|3615.53506|
|4|0.84777|0.84777|7465122.0407|7465122.15472|2322.16294|2322.16294|
|5|0.57693|0.57693|7852227.9122|7852227.87766|2463.30077|2463.30077|

---

ðŸ–ˆ Turag, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.92484|0.92484|3161224.41817|3161224.3868|1363.30748|1363.30748|
|2|-5.96207|-5.96207|3094251.61174|3094251.70178|1464.68792|1464.68795|
|3|-3.30062|-3.30062|7167703.13836|7167703.13108|2403.56227|2403.56227|
|4|-0.96622|-0.96622|1747752.57688|1747752.58035|952.55681|952.55681|
|5|0.97592|0.97592|1354352.16612|1354352.13723|1020.48093|1020.48092|

---

ðŸ–ˆ Uttar Khan, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|-0.03703|0.83885|3215413.65509|499662.11213|1701.86236|484.41205|
|2|0.91697|0.91697|81731.94637|81731.94275|258.11997|258.11996|
|3|0.80024|0.80024|205812.38426|205811.32753|375.12359|375.12201|
|4|0.67206|0.67206|470133.14259|470132.98074|500.98306|500.98288|
|5|0.85621|0.85621|372400.30313|372400.3257|372.98955|372.98956|

---

ðŸ–ˆ Uttara, Dhaka
| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |
|---|---|---|---|---|---|---|
|1|0.77195|0.77195|1634155924.44431|1634155924.59253|16528.68345|16528.68345|
|2|0.10664|0.10664|178912106.32782|178912106.51609|9981.81856|9981.81856|
|3|0.7796|0.7796|186766493.46818|186766493.27682|10306.5058|10306.5058|
|4|0.10572|0.10572|146300267.09515|146300267.04259|9323.41633|9323.41634|
|5|0.5069|0.5069|287151326.50061|287151326.39419|12392.44804|12392.44803|

---

ðŸ–ˆ Zafrabad, Dhaka
â›Œ Skipping Zafrabad, Dhaka (not enough data points: 3)

## Code Snippet

```python
from sklearn.linear_model import LinearRegression

from app.handler.data.download import download_csv_from_gist
from app.handler.data.load import load_csv_data
from app.handler.data.preprocess import preprocess_loaded_data
from app.model.linear_regression import get_weight_vector
from config import FORMATTED_CSV_GIST_URL


def r_squared(y_predicted: list[float], y_original: list[float]) -> float:
    if len(y_original) != len(y_predicted):
        raise ValueError("Length of predicted and original lists must be the same.")

    y_mean = sum(y_original) / len(y_original)

    ss_total = sum((y - y_mean) ** 2 for y in y_original)
    if ss_total == 0:
        # All y values are (almost) the same, R squared value is undefined
        # treating as 0 for safe reporting
        return 0.0

    ss_residual = sum(
        (y_o - float(y_p)) ** 2 for y_o, y_p in zip(y_original, y_predicted)
    )

    return 1 - (ss_residual / ss_total)


def mse(y_predicted: list[float], y_original: list[float]) -> float:
    return sum(
        (float(y) - float(y_hat)) ** 2 for y, y_hat in zip(y_original, y_predicted)
    ) / len(y_original)


def mae(y_predicted: list[float], y_original: list[float]) -> float:
    return sum(
        abs(float(y) - float(y_hat)) for y, y_hat in zip(y_original, y_predicted)
    ) / len(y_original)


def run_benchmark():
    preprocessed_data = preprocess_loaded_data(
        load_csv_data(download_csv_from_gist(FORMATTED_CSV_GIST_URL))
    )

    for location, data in preprocessed_data.items():
        print(f"\nðŸ–ˆ {location}  ")
        x_total = data.feature_vectors
        y_total = data.labels
        total = len(x_total)

        if total < 10:
            print(f"â›Œ Skipping {location} (not enough data points: {total})  ")
            continue

        k = 5 # Number of folds for cross-validation
        fold_size = total // k

        print(
            "| Fold | RÂ² (Scratch) | RÂ² (Sklearn) | MSE (Scratch) | MSE (Sklearn) | MAE (Scratch) | MAE (Sklearn) |"
        )
        print("|---|---|---|---|---|---|---|")

        for fold in range(k):
            start = fold * fold_size
            end = start + fold_size

            x_test = x_total[start:end]
            y_test = y_total[start:end]

            x_train = x_total[:start] + x_total[end:]
            y_train = y_total[:start] + y_total[end:]

            weights = get_weight_vector(x_train, y_train)

            sklearn_model = LinearRegression()
            sklearn_model.fit(x_train, y_train)

            y_pred: list[float] = []
            for x in x_test:
                pred = sum(w[0] * xi for w, xi in zip(weights, x))
                y_pred.append(pred)

            pred_sklearn = sklearn_model.predict(x_test)

            print(
                "|"
                + "|".join(["{}"] * 7).format(
                    fold + 1,
                    round(r_squared(y_pred, y_test), 5),
                    round(r_squared((pred_sklearn), y_test), 5),
                    round(mse(y_pred, y_test), 5),
                    round(mse(pred_sklearn, y_test), 5),
                    round(mae(y_pred, y_test), 5),
                    round(mae(pred_sklearn, y_test), 5),
                )
                + "|"
            )

        print("---")


if __name__ == "__main__":
    run_benchmark()
```
